<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æµœæ¾é¤ƒå­è¨ºæ–­</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Noto Sans JP', sans-serif;
      margin: 0;
      background: #FAF5F0;
      color: #333;
      scroll-behavior: smooth;
    }
    .hero {
      text-align: center;
      padding: 60px 20px;
      background-color: #FAF5F0;
    }
    .hero img.hero-title {
      max-width: 600px;
      width: 90%;
      margin-bottom: 12px;
    }
    .hero-sub {
      font-size: 18px;
      color: #8D4E49;
      margin-bottom: 32px;
    }
    .hero-chara {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 40px;
    }
    .hero-chara img {
      height: 120px;
      transition: transform 0.3s ease;
    }
    .hero-chara img:hover {
      transform: scale(1.05);
    }
    
    /* --- â–¼ ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã®æ–°ã—ã„ã‚¹ã‚¿ã‚¤ãƒ« â–¼ --- */
    /* ãƒœã‚¿ãƒ³ã®å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
    .start-btn {
      display: inline-block;
      padding: 16px 40px;
      font-size: 22px;
      font-weight: 700;
      color: white;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      text-decoration: none;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      position: relative; /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæº–ç‚¹ */
      overflow: hidden; /* ã¯ã¿å‡ºã—ãŸè¦ç´ ã‚’éš ã™ */
    }

    /* ææ¡ˆ1ï¼šã˜ã‚…ã‚ã£ã¨ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */
    .start-btn-gradient {
      background: linear-gradient(45deg, #e58c40, #d44a2c);
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      animation: pulse 2.5s infinite;
    }
    
    .start-btn-gradient:hover {
      transform: translateY(-3px);
      box-shadow: 0 7px 20px rgba(0,0,0,0.25);
    }

    .start-btn-gradient:active {
      transform: translateY(1px);
    }
    
    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(229, 140, 64, 0.7);
      }
      70% {
        box-shadow: 0 0 0 15px rgba(229, 140, 64, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(229, 140, 64, 0);
      }
    }

    /* ææ¡ˆ2ï¼šã‚­ãƒ©ã£ã¨ã‚·ãƒ£ã‚¤ãƒ³ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒœã‚¿ãƒ³ */
    .start-btn-shine {
      background-color: #c3391a;
    }
    
    .start-btn-shine::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(to bottom right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0) 100%);
      transform: rotate(45deg);
      animation: shine 4s infinite linear;
    }
    
    @keyframes shine {
      0% { transform: scale(0) rotate(45deg); opacity: 0; }
      80% { transform: scale(0) rotate(45deg); opacity: 0.5; }
      81% { transform: scale(4) rotate(45deg); opacity: 1; }
      100% { transform: scale(50) rotate(45deg); opacity: 0; }
    }
    /* --- â–² ã‚¹ã‚¿ã‚¤ãƒ«ã“ã“ã¾ã§ â–² --- */

    .section {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 40px 16px;
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.6s ease-out;
    }
    .section.visible {
      opacity: 1;
      transform: translateY(0);
    }
    .choice {
      background: #f0f0f0;
      border-radius: 10px;
      padding: 14px 22px;
      margin: 10px;
      border: 2px solid transparent;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      color: #333;
      font-weight: 500;
    }
    .choice:hover {
      background-color: #D89C90;
      color: #fff;
    }
    .choice.selected {
      background-color: #8D4E49;
      color: #fff;
      border-color: #8D4E49;
    }
    .question-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 90%;
        max-width: 500px;
        margin: 0 auto;
        background: #fff;
        padding: 30px 25px;
        border-radius: 20px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    }
    .question-content {
        text-align: center;
        width: 100%;
        padding: 0;
    }
    .question-content h2 {
      font-size: 20px;
      margin-top: 0;
      margin-bottom: 15px;
    }
    .progress-container {
      width: 100%;
      height: 45px;
      position: relative;
      margin-bottom: 30px;
    }
    .progress-bar {
        width: 100%;
        background-color: #e0e0e0;
        border-radius: 5px;
        height: 10px;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        overflow: hidden;
    }
    .progress-bar-inner {
        width: 0%;
        height: 100%;
        background-color: #8D4E49;
        border-radius: 5px;
        transition: width 0.5s ease-out;
    }
    .progress-character.moving {
      width: 45px;
      height: 45px;
      position: absolute;
      top: 50%;
      left: 0%;
      transform: translate(-50%, -50%);
      transition: left 0.5s ease-out;
      z-index: 2;
    }
    
    #result-section {
      min-height: 100vh;
      background: #8D4E49;
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 40px 20px;
      text-align: center;
    }
    .result-img {
      width: 80%;
      max-width: 320px;
      border-radius: 12px;
      margin-bottom: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    #result-text h2 {
      font-size: 18px;
      font-weight: 500;
      margin-bottom: 24px;
    }
    #result-text h3 {
      font-size: 32px;
      margin: 0 0 16px 0;
      color: #FFDDAA;
      font-weight: 700;
    }
    .reason-box {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 10px 20px;
      margin: 16px auto;
      display: inline-block;
      max-width: 90%;
    }
    .reason-box p {
      margin: 8px 0;
      font-size: 16px;
      line-height: 1.6;
    }
    .match-percent {
      font-size: 18px;
      font-weight: bold;
      margin-top: 16px;
    }
    .access-info {
      margin-top: 8px;
      font-size: 14px;
    }
    a.result-link {
      display: inline-block;
      margin-top: 20px;
      padding: 12px 24px;
      background: #FFDDAA;
      color: #8D4E49;
      font-weight: bold;
      border-radius: 25px;
      text-decoration: none;
      transition: all 0.3s;
    }
    a.result-link:hover {
      opacity: 0.8;
    }
    #result-section button {
      padding: 12px 30px;
      background-color: transparent;
      color: white;
      font-size: 16px;
      border: 1px solid white;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 8px;
    }
    #result-section button:hover {
      background-color: white;
      color: #8D4E49;
    }
  </style>
</head>
<body>
  <section class="hero">
    <img src="images/è¦‹å‡ºã—@300x.png" alt="æµœæ¾é¤ƒå­è¦‹å‡ºã—" class="hero-title" />
    <p class="hero-sub">ã‚ãªãŸã«ã´ã£ãŸã‚Šã®æµœæ¾é¤ƒå­ã€è¨ºæ–­ã§è¦‹ã¤ã‘ã‚ˆã†ï¼</p>
    <div class="hero-chara">
      <img src="images/ã±ã‚Šã±ã‚Š@300x.png" alt="ãƒ‘ãƒªãƒ‘ãƒªé¤ƒå­" />
      <img src="images/ã‚‚ã¡ã±ã‚Š@300x.png" alt="ã‚‚ã¡ã±ã‚Šé¤ƒå­" />
      <img src="images/ã‚‚ã¡ã‚‚ã¡@300x.png" alt="ã‚‚ã¡ã‚‚ã¡é¤ƒå­" />
    </div>

    <button id="startBtn" class="start-btn start-btn-gradient">è¨ºæ–­ã‚¹ã‚¿ãƒ¼ãƒˆ â€º</button>

    <div id="shopList" style="margin-top:40px;">
      
    <div style="display: flex; overflow-x: auto; padding: 0 16px; gap: 16px; scroll-snap-type: x mandatory;">
        
    <div style="flex: 0 0 auto; width: 240px; background: #fff; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); padding: 12px; scroll-snap-align: start;">
      <img src="images/mutsugiku19-4.jpg" alt="ã‚€ã¤ãã" style="width: 100%; border-radius: 8px; object-fit: cover; height: 200px;" />
      <h3 style="margin: 8px 0 4px; font-size: 16px;">ã‚€ã¤ãã</h3>
      <p style="font-size: 14px; color: #555;">é§…ãƒã‚«ãƒ»é‡èœå¤šã‚ã§ã‚ã£ã•ã‚Šï¼</p>
    </div>

    <div style="flex: 0 0 auto; width: 240px; background: #fff; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); padding: 12px; scroll-snap-align: start;">
      <img src="images/fukumitu.jpg" alt="ç¦ã¿ã¤" style="width: 100%; border-radius: 8px; object-fit: cover; height: 200px;" />
      <h3 style="margin: 8px 0 4px; font-size: 16px;">ç¦ã¿ã¤</h3>
      <p style="font-size: 14px; color: #555;">æšã’é¤ƒå­é¢¨ãƒ»ãƒ‹ãƒ³ãƒ‹ã‚¯å¼·ã‚ï¼</p>
    </div>

    <div style="flex: 0 0 auto; width: 240px; background: #fff; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); padding: 12px; scroll-snap-align: start;">
      <img src="images/kibori.jpg" alt="å–œæ…•é‡Œ" style="width: 100%; border-radius: 8px; object-fit: cover; height: 200px;" />
      <h3 style="margin: 8px 0 4px; font-size: 16px;">å–œæ…•é‡Œï¼ˆã‚­ãƒœãƒªï¼‰</h3>
      <p style="font-size: 14px; color: #555;">ãƒ‘ãƒªãƒ‘ãƒªï¼†ãŠã¤ã¾ã¿ã«ã‚‚æœ€é«˜ï¼</p>
    </div>

    <div style="flex: 0 0 auto; width: 240px; background: #fff; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); padding: 12px; scroll-snap-align: start;">
      <img src="images/isimatu.jpg" alt="çŸ³æ¾é¤ƒå­" style="width: 100%; border-radius: 8px; object-fit: cover; height: 200px;" />
      <h3 style="margin: 8px 0 4px; font-size: 16px;">çŸ³æ¾é¤ƒå­ JRæµœæ¾é§…åº—</h3>
      <p style="font-size: 14px; color: #555;">é§…ç›´çµãƒ»ã‚ã£ã•ã‚Šãƒ¢ãƒãƒ¢ãƒæ´¾ã«â—</p>
    </div>

    <div style="flex: 0 0 auto; width: 240px; background: #fff; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); padding: 12px; scroll-snap-align: start;">
      <img src="images/hamatarou.jpg" alt="æµœå¤ªéƒ" style="width: 100%; border-radius: 8px; object-fit: cover; height: 200px;" />
      <h3 style="margin: 8px 0 4px; font-size: 16px;">æµœå¤ªéƒ</h3>
      <p style="font-size: 14px; color: #555;">ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³è±Šå¯Œãªåç‰©é¤ƒå­ï¼</p>
    </div>

    <div style="flex: 0 0 auto; width: 240px; background: #fff; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); padding: 12px; scroll-snap-align: start;">
      <img src="images/gyouzaman.jpg" alt="ãã‚‡ã†ã–ã¾ã‚“" style="width: 100%; border-radius: 8px; object-fit: cover; height: 200px;" />
      <h3 style="margin: 8px 0 4px; font-size: 16px;">ãã‚‡ã†ã–ã¾ã‚“</h3>
      <p style="font-size: 14px; color: #555;">ãƒ‘ãƒªãƒ‘ãƒªç³»ãƒ»ç”˜ã‚ãƒ€ãƒ¬ãƒ»é§…è¿‘ï¼</p>
    </div>

    <div style="flex: 0 0 auto; width: 240px; background: #fff; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); padding: 12px; scroll-snap-align: start;">
      <img src="images/tanto.jpg" alt="æ¿±æ¾ãŸã‚“ã¨" style="width: 100%; border-radius: 8px; object-fit: cover; height: 200px;" />
      <h3 style="margin: 8px 0 4px; font-size: 16px;">æ¿±æ¾ãŸã‚“ã¨ æœ¬åº—</h3>
      <p style="font-size: 14px; color: #555;">ç”˜ã‚ã®ã‚¿ãƒ¬ãƒ»ãŠé…’ã‚‚å……å®Ÿã®äººæ°—åº—ï¼</p>
    </div>

    <div style="flex: 0 0 auto; width: 240px; background: #fff; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); padding: 12px; scroll-snap-align: start;">
      <img src="images/mutsukiku.jpg" alt="ã‚€ã¤èŠ" style="width: 100%; border-radius: 8px; object-fit: cover; height: 200px;" />
      <h3 style="margin: 8px 0 4px; font-size: 16px;">ã‚€ã¤èŠ</h3>
      <p style="font-size: 14px; color: #555;">ã‚‚ã¡ã±ã‚Šãƒ»ç”˜ã¿ã®ã‚ã‚‹å„ªã—ã„å‘³ï¼</p>
    </div>

    <div style="flex: 0 0 auto; width: 240px; background: #fff; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); padding: 12px; scroll-snap-align: start;">
      <img src="images/kadoya.jpg" alt="ã‹ã©ã‚„" style="width: 100%; border-radius: 8px; object-fit: cover; height: 200px;" />
      <h3 style="margin: 8px 0 4px; font-size: 16px;">ã‹ã©ã‚„</h3>
      <p style="font-size: 14px; color: #555;">é¤ƒå­100å€‹ã‚‚é ¼ã‚ã‚‹ï¼æšã’é¤ƒå­æ´¾ã«â—</p>
    </div>

  </div>
</div>

  </section>
  
  <div id="quiz-container" style="display: none;"></div>
  <div id="result-section" style="display: none;">
    <div id="result-text"></div>
    <div id="result-buttons" style="margin-top: 20px;">
        <button onclick="retry()">ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</button>
        <button onclick="goHome()">ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</button>
    </div>
  </div>

  <script>
    const questions = [
      { text: "ã‚¢ã‚¯ã‚»ã‚¹é‡è¦–ï¼Ÿ", values: ["é§…ãƒã‚«ãŒã„ã„", "è»Šã§ã‚‚å¯"] },
      { text: "ç„¼ãæ–¹ã¯ï¼Ÿ", values: ["ãƒ‘ãƒªãƒ‘ãƒªæ´¾", "ã‚‚ã£ã¡ã‚Šæ´¾"] },
      { text: "ã«ã‚“ã«ãã¯ï¼Ÿ", values: ["ã‚¬ãƒ„ãƒ³ã¨åŠ¹ã„ã¦ã»ã—ã„", "æ§ãˆã‚ãŒã„ã„"] },
      { text: "ã‚¿ãƒ¬ã®å‘³ã¯ï¼Ÿ", values: ["ç”˜ã‚ãŒå¥½ã", "é…¸å‘³ã‚„è¾›å‘³ãŒå¥½ã"] },
      { text: "é¤ƒå­ä»¥å¤–ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚‚ï¼Ÿ", values: ["å……å®Ÿã—ã¦ã‚‹ã¨ã†ã‚Œã—ã„", "é¤ƒå­ã ã‘ã§OK"] },
      { text: "æ··é›‘ã¯ï¼Ÿ", values: ["å¤šå°‘ä¸¦ã‚“ã§ã‚‚OK", "ç©ºã„ã¦ã‚‹æ–¹ãŒã„ã„"] }
    ];

    const recommendations = [
      { name: "ã‚€ã¤ãã", conditions: { 0: "é§…ãƒã‚«ãŒã„ã„", 1: "ãƒ‘ãƒªãƒ‘ãƒªæ´¾", 2: "æ§ãˆã‚ãŒã„ã„", 4: "é¤ƒå­ã ã‘ã§OK", 5: "å¤šå°‘ä¸¦ã‚“ã§ã‚‚OK" }, url: "http://mutsugiku.jp/", access: "JRæµœæ¾é§…ã‹ã‚‰å¾’æ­©3åˆ†", image: "images/mutsugiku19-4.jpg", reasons: {0: "ã€Œé§…ãƒã‚«ã€ã‚’é‡è¦–ã™ã‚‹ã‚ãªãŸã«ï¼", 1: "ã‚­ãƒ£ãƒ™ãƒ„å¤šã‚ã®é¤¡ã‚’ã€Œãƒ‘ãƒªãƒ‘ãƒªã€ã®çš®ã§æ¥½ã—ã‚ã¾ã™ã€‚", 2: "ã€Œã«ã‚“ã«ãæ§ãˆã‚ã€ã§ã‚ã£ã•ã‚Šé£Ÿã¹ã‚‰ã‚Œã¾ã™ã€‚"}},
      { name: "ç¦ã¿ã¤", conditions: { 1: "ãƒ‘ãƒªãƒ‘ãƒªæ´¾", 2: "ã‚¬ãƒ„ãƒ³ã¨åŠ¹ã„ã¦ã»ã—ã„", 4: "é¤ƒå­ã ã‘ã§OK" }, url: "https://tabelog.com/shizuoka/A2202/A220201/22001373/", access: "é é‰„ãƒã‚¹ã€Œä½é³´å°å›£åœ°ã€ã‹ã‚‰å¾’æ­©5åˆ†", image: "images/fukumitu.jpg", reasons: {1: "æšã’ç„¼ãé¢¨ã®ã€Œãƒ‘ãƒªãƒ‘ãƒªæ´¾ã€ãªã‚‰ã“ã“ï¼", 2: "ã€Œã«ã‚“ã«ãã‚¬ãƒ„ãƒ³ã¨ã€ã§ãƒ‘ãƒ³ãƒã®ã‚ã‚‹å‘³ãŒç‰¹å¾´ã§ã™ã€‚"}},
      { name: "å–œæ…•é‡Œï¼ˆã‚­ãƒœãƒªï¼‰", conditions: { 1: "ãƒ‘ãƒªãƒ‘ãƒªæ´¾", 2: "ã‚¬ãƒ„ãƒ³ã¨åŠ¹ã„ã¦ã»ã—ã„", 4: "å……å®Ÿã—ã¦ã‚‹ã¨ã†ã‚Œã—ã„" }, url: "https://tabelog.com/shizuoka/A2202/A220201/22002540/", access: "é é‰„ãƒã‚¹ã€Œè¥¿éƒµä¾¿å±€ã€ã‹ã‚‰å¾’æ­©3åˆ†", image: "images/kibori.jpg", reasons: {1: "è–„çš®ã§ã€Œãƒ‘ãƒªãƒ‘ãƒªã€ã®é£Ÿæ„ŸãŒãŸã¾ã‚Šã¾ã›ã‚“ã€‚", 4: "ãŠã¤ã¾ã¿ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚‚å¤šãã€Œå……å®Ÿã—ã¦ã‚‹ã€ãŠåº—ãŒå¥½ããªæ–¹ã«ãŠã™ã™ã‚ã€‚"}},
      { name: "çŸ³æ¾é¤ƒå­ JRæµœæ¾é§…åº—", conditions: { 0: "é§…ãƒã‚«ãŒã„ã„", 1: "ã‚‚ã£ã¡ã‚Šæ´¾", 2: "æ§ãˆã‚ãŒã„ã„", 3: "ç”˜ã‚ãŒå¥½ã", 5: "å¤šå°‘ä¸¦ã‚“ã§ã‚‚OK" }, url: "https://1402.jp/", access: "JRæµœæ¾é§…ç›´çµ", image: "images/isimatu.jpg", reasons: {0: "ã€Œé§…ç›´çµã€ã§ã‚¢ã‚¯ã‚»ã‚¹æŠœç¾¤ï¼", 1: "çš®ã¯ã€Œã‚‚ã£ã¡ã‚Šã€ã¨ã—ãŸé£Ÿæ„ŸãŒæ¥½ã—ã‚ã¾ã™ã€‚", 2: "ã‚­ãƒ£ãƒ™ãƒ„ã®ç”˜ã¿ãŒæ´»ããŸã€Œã«ã‚“ã«ãæ§ãˆã‚ã€ã®å„ªã—ã„å‘³ã§ã™ã€‚"}},
      { name: "æµœå¤ªéƒ", conditions: { 1: "ãƒ‘ãƒªãƒ‘ãƒªæ´¾", 4: "å……å®Ÿã—ã¦ã‚‹ã¨ã†ã‚Œã—ã„" }, url: "https://hamatarou-ta.owst.jp/", access: "JRæµœæ¾é§…ã‹ã‚‰è»Šã§15åˆ†", image: "images/hamatarou.jpg", reasons: {1: "ã€Œãƒ‘ãƒªãƒ‘ãƒªã€ã®ç¾½æ ¹ã¤ãé¤ƒå­ãŒåç‰©ã§ã™ï¼", 4: "é¤ƒå­ã®ç¨®é¡ãŒè±Šå¯Œã§ã€Œå……å®Ÿã€ã—ã¦ã„ã¾ã™ã€‚"}},
      { name: "ãã‚‡ã†ã–ã¾ã‚“", conditions: { 0: "é§…ãƒã‚«ãŒã„ã„", 1: "ãƒ‘ãƒªãƒ‘ãƒªæ´¾", 3: "ç”˜ã‚ãŒå¥½ã" }, url: "https://gyotheman.owst.jp/", access: "é é‰„ã€Œæ–°æµœæ¾é§…ã€ã‹ã‚‰å¾’æ­©5åˆ†", image: "images/gyouzaman.jpg", reasons: {0: "æ–°æµœæ¾é§…ã‹ã‚‰å¾’æ­©5åˆ†ã§ã€Œé§…ãƒã‚«ã€ã§ã™ã€‚", 1: "ã€Œãƒ‘ãƒªãƒ‘ãƒªã€é£Ÿæ„Ÿã®é¤ƒå­ã¨", 3: "ã€Œç”˜ã‚ã®ã‚¿ãƒ¬ã€ãŒç›¸æ€§æŠœç¾¤ã§ã™ã€‚"}},
      { name: "æ¿±æ¾ãŸã‚“ã¨ æœ¬åº—", conditions: { 0: "é§…ãƒã‚«ãŒã„ã„", 1: "ãƒ‘ãƒªãƒ‘ãƒªæ´¾", 3: "ç”˜ã‚ãŒå¥½ã", 4: "å……å®Ÿã—ã¦ã‚‹ã¨ã†ã‚Œã—ã„", 5: "å¤šå°‘ä¸¦ã‚“ã§ã‚‚OK" }, url: "https://tanto-otabe.com/", access: "JRæµœæ¾é§…ã‹ã‚‰å¾’æ­©5åˆ†", image: "images/tanto.jpg", reasons: {0: "æµœæ¾é§…ã‹ã‚‰å¾’æ­©åœå†…ã®ã€Œé§…ãƒã‚«ã€ã§ä¾¿åˆ©ï¼", 4: "ãŠé…’ã‚„ä¸€å“æ–™ç†ã‚‚ã€Œå……å®Ÿã€ã—ã¦ã„ã‚‹äººæ°—åº—ã§ã™ã€‚"}},
      { name: "ã‚€ã¤èŠ", conditions: { 0: "è»Šã§ã‚‚å¯", 1: "ã‚‚ã£ã¡ã‚Šæ´¾", 2: "æ§ãˆã‚ãŒã„ã„", 3: "ç”˜ã‚ãŒå¥½ã" }, url: "https://tabelog.com/shizuoka/A2202/A220201/22003100/", access: "æµœæ¾ICã‹ã‚‰è»Šã§15åˆ†", image: "images/mutsukiku.jpg", reasons: {1: "ã€Œã‚‚ã£ã¡ã‚Šã€ã¨ã€Œãƒ‘ãƒªãƒ‘ãƒªã€ã®ä¸¡æ–¹ãŒæ¥½ã—ã‚ã‚‹ã€ã‚‚ã¡ã±ã‚Šã€ãªçš®ãŒç‰¹å¾´ï¼", 2: "é‡èœã®ç”˜ã¿ãŒå„ªã—ã„ã€Œã«ã‚“ã«ãæ§ãˆã‚ã€ã§ã™ã€‚"}},
      { name: "ã‹ã©ã‚„", conditions: { 0: "è»Šã§ã‚‚å¯", 1: "ãƒ‘ãƒªãƒ‘ãƒªæ´¾", 2: "ã‚¬ãƒ„ãƒ³ã¨åŠ¹ã„ã¦ã»ã—ã„" }, url: "https://tabelog.com/shizuoka/A2202/A220201/22001517/", access: "æµœæ¾è¥¿ICã‹ã‚‰è»Šã§20åˆ†", image: "images/kadoya.jpg", reasons: {1: "æšã’é¤ƒå­ã®ã‚ˆã†ãªã€Œãƒ‘ãƒªãƒ‘ãƒªã€é£Ÿæ„ŸãŒå¥½ããªæ–¹ã«ãŠã™ã™ã‚ï¼", 2: "ã€Œã«ã‚“ã«ãã‚¬ãƒ„ãƒ³ã¨ã€ã§é£Ÿã¹å¿œãˆã‚‚ã°ã£ã¡ã‚Šã§ã™ã€‚" }}
    ];

    const answers = {};
    const quizContainer = document.getElementById('quiz-container');

    function createSection(index, question) {
        const section = document.createElement('section');
        section.className = 'section';
        section.id = `question-${index}`;

        const wrapper = document.createElement('div');
        wrapper.className = 'question-wrapper';

        const progressContainer = document.createElement('div');
        progressContainer.className = 'progress-container';

        const progressBar = document.createElement('div');
        progressBar.className = 'progress-bar';
        const progressBarInner = document.createElement('div');
        progressBarInner.className = 'progress-bar-inner';
        progressBar.appendChild(progressBarInner);
        
        const movingChar = document.createElement('img');
        movingChar.src = 'images/ã‚‚ã¡ã±ã‚Š@300x.png';
        movingChar.className = 'progress-character moving';
        movingChar.id = `moving-char-${index}`; 

        progressContainer.appendChild(progressBar);
        progressContainer.appendChild(movingChar);
        
        const initialProgress = (index / questions.length) * 100;
        progressBarInner.style.width = `${initialProgress}%`;
        movingChar.style.left = `${initialProgress}%`;

        const content = document.createElement('div');
        content.className = 'question-content';

        const h2 = document.createElement('h2');
        h2.textContent = question.text;
        content.appendChild(h2);

        question.values.forEach(value => {
            const btn = document.createElement('div');
            btn.className = 'choice';
            btn.textContent = value;
            btn.onclick = () => {
                answers[index] = value;
                document.getElementById(`question-${index}`).querySelectorAll('.choice').forEach(c => c.classList.remove('selected'));
                btn.classList.add('selected');

                const progress = ((index + 1) / questions.length) * 100;
                progressBarInner.style.width = `${progress}%`;
                movingChar.style.left = `${progress}%`;

                setTimeout(() => {
                    if (index === questions.length - 1) {
                        diagnose(); 
                    } else {
                        const next = document.getElementById(`question-${index + 1}`);
                        if (next) next.scrollIntoView({ behavior: 'smooth' });
                    }
                }, 400);
            };
            content.appendChild(btn);
        });

        wrapper.appendChild(progressContainer);
        wrapper.appendChild(content);
        section.appendChild(wrapper);
        return section;
    }

    document.getElementById('startBtn').addEventListener('click', () => {
      document.querySelector('.hero').style.display = 'none';
      quizContainer.style.display = 'block';
      const first = document.getElementById('question-0');
      setTimeout(() => {
        if (first) {
            first.scrollIntoView({ behavior: 'smooth' });
            first.classList.add('visible');
        }
      }, 100);
    });

    function retry() {
      document.querySelectorAll('.progress-bar-inner').forEach(bar => bar.style.width = '0%');
      document.querySelectorAll('.progress-character.moving').forEach(char => char.style.left = '0%');
      
      for (let key in answers) delete answers[key];
      document.querySelectorAll('.choice').forEach(choice => choice.classList.remove('selected'));
      document.getElementById('result-section').style.display = 'none';
      quizContainer.style.display = 'block';
      document.getElementById('question-0').scrollIntoView({ behavior: 'smooth' });
    }

    function goHome() {
      retry(); 
      document.getElementById('result-section').style.display = 'none';
      quizContainer.style.display = 'none';
      document.querySelector('.hero').style.display = 'block';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function diagnose() {
      let bestMatch = null;
      let maxScore = -1;

      recommendations.forEach(rec => {
        let score = 0;
        for (const [qIdx, val] of Object.entries(rec.conditions)) {
          if (answers[qIdx] === val) {
            score++;
          }
        }
        if (score > maxScore) {
          maxScore = score;
          bestMatch = rec;
        }
      });

      const resultSection = document.getElementById('result-section');
      const resultText = document.getElementById('result-text');

      if (bestMatch) {
        const percent = Math.round((maxScore / Object.keys(bestMatch.conditions).length) * 100);
        let reasonHtml = '';
        if (bestMatch.reasons) {
            for (const [qIdx, reason] of Object.entries(bestMatch.reasons)) {
                if (answers[qIdx] === bestMatch.conditions[qIdx]) {
                    reasonHtml += `<p>${reason}</p>`;
                }
            }
        }
        if (reasonHtml === '') {
            reasonHtml = '<p>ãã£ã¨ã‚ãªãŸã«ã´ã£ãŸã‚Šã®é¤ƒå­ã§ã™ï¼</p>';
        }

        resultText.innerHTML = `
          <h2>ã‚ãªãŸã«ãŠã™ã™ã‚ã®é¤ƒå­åº—ã¯...</h2>
          <img src="${bestMatch.image}" alt="${bestMatch.name}" class="result-img">
          <h3>${bestMatch.name}</h3>
          <div class="reason-box">
            ${reasonHtml}
          </div>
          <p class="match-percent">ä¸€è‡´åº¦: ${percent}%</p>
          <p class="access-info">ğŸ“ ã‚¢ã‚¯ã‚»ã‚¹: ${bestMatch.access}</p>
          <a href="${bestMatch.url}" target="_blank" class="result-link">â–¶ ãŠåº—ã®è©³ç´°ã‚’è¦‹ã‚‹</a>
        `;

      } else {
        resultText.innerHTML = `<h2>ãŠã™ã™ã‚ã®ãŠåº—ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</h2><p>æ¡ä»¶ã‚’å¤‰ãˆã¦ã‚‚ã†ä¸€åº¦è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã­ã€‚</p>`;
      }

      quizContainer.style.display = 'none';
      resultSection.style.display = 'flex';
      resultSection.scrollIntoView({ behavior: 'smooth' });
    }

    function observeSections() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, { threshold: 0.1 });
      document.querySelectorAll('.section').forEach(sec => observer.observe(sec));
    }

    questions.forEach((q, idx) => {
      const sec = createSection(idx, q);
      quizContainer.appendChild(sec);
    });
    
    observeSections();
  </script>
</body>
</html>